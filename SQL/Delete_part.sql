USE [TEST]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[delete_part]
	@id int
AS

BEGIN
SET NOCOUNT ON;
BEGIN TRY
	BEGIN TRANSACTION

		DELETE FROM [dbo].[table_descendant]
		WHERE id_main = @id;

		DELETE FROM [dbo].[table_main]
		WHERE id = @id;


		COMMIT TRANSACTION
		RETURN 0
END TRY
BEGIN CATCH
	ROLLBACK TRANSACTION
	RETURN 1
END CATCH

END
